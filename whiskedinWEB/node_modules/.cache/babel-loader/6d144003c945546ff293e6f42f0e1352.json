{"ast":null,"code":"import _classCallCheck from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Javdav/WebstormProjects/untitled/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Javdav/WebstormProjects/untitled/src/UserAuth/UserAuth.js\";\nimport React, { Component } from 'react';\nimport './UserAuth.css';\nimport { Button, Col, Form, FormGroup, Input, Label, Nav, NavItem, NavLink, Row, TabContent, TabPane } from \"reactstrap\";\nimport axios from 'axios';\nimport classnames from 'classnames';\nimport whisk from '../img/whiskedinlogo.png';\nimport API_URL from '../index';\n\nvar UserAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserAuth, _Component);\n\n  function UserAuth(props) {\n    var _this;\n\n    _classCallCheck(this, UserAuth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserAuth).call(this, props));\n\n    _this.handleUsernameChange = function (event) {\n      _this.setState({\n        username: event.target.value\n      });\n    };\n\n    _this.handlePasswordChange = function (event) {\n      _this.setState({\n        password: event.target.value\n      });\n    };\n\n    _this.handleEmailChange = function (event) {\n      _this.setState({\n        email: event.target.value\n      });\n    };\n\n    _this.handleLoginSubmit = function (event) {\n      event.preventDefault(); // Creating form to be sent to API\n\n      var data = new FormData();\n      data.append('username', _this.state.username);\n      data.append('password', _this.state.password); // Contacting API to validate user password\n\n      axios.post(API_URL + \"/login\", data, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        if (res.data[\"access_token\"]) {\n          localStorage.setItem('user', JSON.stringify(res.data[\"access_token\"]));\n\n          _this.props.history.push(\"/home\");\n        }\n      }).catch(function (res) {\n        var err = document.getElementById('id_er');\n        err.style.visibility = \"visible\";\n        err.innerText = \"Invalid username or password\"; // show error\n      });\n    };\n\n    _this.handleSignUpSubmit = function (event) {\n      event.preventDefault(); // Creating form to be sent to API\n\n      var data = new FormData();\n      data.append('username', _this.state.username);\n      data.append('password', _this.state.password); // Contacting api to add new user\n\n      axios.post(API_URL + \"/register\", data, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        console.log(res);\n        console.log(res.data);\n        localStorage.setItem('user', JSON.stringify(res.data['access_token']));\n\n        _this.props.history.push('/home');\n      }).catch(function (res) {\n        var err = document.getElementById('id_existing_user');\n        err.style.visibility = \"visible\";\n        err.innerText = \"Username already exists\"; // show error\n      });\n    };\n\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      activeTab: '1',\n      username: '',\n      email: '',\n      password: '',\n      error: ''\n    };\n    return _this;\n  }\n\n  _createClass(UserAuth, [{\n    key: \"toggle\",\n    value: function toggle(tab) {\n      if (this.state.activeTab !== tab) {\n        this.setState({\n          activeTab: tab\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"UserAuth-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: whisk,\n        className: \"UserAuth-logo\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"UserAuth-tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        tabs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '1'\n        }),\n        onClick: function onClick() {\n          _this2.toggle('1');\n        },\n        id: \"id_sign_in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Login\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '2'\n        }),\n        onClick: function onClick() {\n          _this2.toggle('2');\n        },\n        id: 'id_sign_up',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Sign-Up\"))), React.createElement(TabContent, {\n        activeTab: this.state.activeTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tabId: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bork-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"UserAuth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"error\",\n        id: \"id_invalid_user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Form, {\n        onSubmit: this.handleLoginSubmit,\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Username\"), React.createElement(Input, {\n        type: \"username\",\n        name: \"username\",\n        id: \"UserAuth-username\",\n        placeholder: \"Enter username\",\n        onChange: this.handleUsernameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"examplePassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        id: \"UserAuth-password\",\n        placeholder: \"Enter password\",\n        onChange: this.handlePasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      })), React.createElement(Button, {\n        id: \"id_login_button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Login\"))))))), React.createElement(TabPane, {\n        tabId: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bork-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"UserAuth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"error\",\n        id: \"id_existing_user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(Form, {\n        onSubmit: this.handleSignUpSubmit,\n        className: \"sign-up\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Username\"), React.createElement(Input, {\n        type: \"username\",\n        name: \"username\",\n        id: \"UserAuth-username\",\n        placeholder: \"Enter username\",\n        onChange: this.handleUsernameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"examplePassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        id: \"UserAuth-password\",\n        placeholder: \"Enter password\",\n        onChange: this.handlePasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), React.createElement(Button, {\n        id: \"id_sign_up_button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Sign-Up\"))))))))));\n    }\n  }]);\n\n  return UserAuth;\n}(Component);\n\nexport { UserAuth as default };","map":{"version":3,"sources":["/Users/Javdav/WebstormProjects/untitled/src/UserAuth/UserAuth.js"],"names":["React","Component","Button","Col","Form","FormGroup","Input","Label","Nav","NavItem","NavLink","Row","TabContent","TabPane","axios","classnames","whisk","API_URL","UserAuth","props","handleUsernameChange","event","setState","username","target","value","handlePasswordChange","password","handleEmailChange","email","handleLoginSubmit","preventDefault","data","FormData","append","state","post","headers","then","res","localStorage","setItem","JSON","stringify","history","push","catch","err","document","getElementById","style","visibility","innerText","handleSignUpSubmit","console","log","toggle","bind","activeTab","error","tab","active"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './UserAuth.css';\nimport {\n    Button,\n    Col,\n    Form,\n    FormGroup,\n    Input,\n    Label,\n    Nav,\n    NavItem,\n    NavLink,\n    Row,\n    TabContent,\n    TabPane\n} from \"reactstrap\";\nimport axios from 'axios';\nimport classnames from 'classnames';\nimport whisk from '../img/whiskedinlogo.png';\n\nimport API_URL from '../index'\n\nexport default class UserAuth extends Component {\n\n    constructor(props) {\n        super(props);\n        this.toggle = this.toggle.bind(this);\n        this.state = {\n            activeTab: '1',\n            username: '',\n            email: '',\n            password: '',\n            error: ''\n        };\n    }\n\n    toggle(tab) {\n        if (this.state.activeTab !== tab) {\n            this.setState({\n                activeTab: tab\n            });\n        }\n    }\n\n    handleUsernameChange = event => {\n        this.setState({username: event.target.value});\n    };\n\n    handlePasswordChange = event => {\n        this.setState({password: event.target.value});\n    };\n\n    handleEmailChange = event => {\n        this.setState({email: event.target.value});\n    };\n\n    handleLoginSubmit = event => {\n        event.preventDefault();\n\n        // Creating form to be sent to API\n        const data = new FormData();\n        data.append('username', this.state.username);\n        data.append('password', this.state.password);\n\n        // Contacting API to validate user password\n        axios.post(API_URL + `/login`, data, {\n            headers: {'Content-Type': 'application/json',}\n        })\n            .then(res => {\n                if (res.data[\"access_token\"]) {\n                    localStorage.setItem('user', JSON.stringify(res.data[\"access_token\"]));\n                    this.props.history.push(\"/home\")\n                }\n\n            }).catch( res => {\n                const err = document.getElementById('id_er');\n                err.style.visibility = \"visible\";\n                err.innerText = \"Invalid username or password\";\n                // show error\n            })\n    };\n\n    handleSignUpSubmit = event => {\n        event.preventDefault();\n\n        // Creating form to be sent to API\n        const data = new FormData();\n        data.append('username', this.state.username);\n        data.append('password', this.state.password);\n\n        // Contacting api to add new user\n        axios.post(API_URL + `/register`, data, {\n            headers: {'Content-Type': 'application/json',}\n        })\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n                localStorage.setItem('user', JSON.stringify(res.data['access_token']));\n                this.props.history.push('/home');\n            }).catch( res => {\n                const err = document.getElementById('id_existing_user');\n                err.style.visibility = \"visible\";\n                err.innerText = \"Username already exists\";\n                // show error\n        })\n    };\n\n\n    render() {\n        return (\n            <div className=\"UserAuth-logo\">\n                <img src={whisk} className=\"UserAuth-logo\" alt=\"\"/>\n                <div className=\"UserAuth-tabs\">\n                    <Nav tabs>\n                        <NavItem>\n                            <NavLink\n                                className={classnames({active: this.state.activeTab === '1'})}\n                                onClick={() => {\n                                    this.toggle('1');\n                                }} id='id_sign_in'\n                            >\n                                Login\n                            </NavLink>\n                        </NavItem>\n                        <NavItem>\n                            <NavLink\n                                className={classnames({active: this.state.activeTab === '2'})}\n                                onClick={() => {\n                                    this.toggle('2');\n                                }} id={'id_sign_up'}\n                            >\n                                Sign-Up\n                            </NavLink>\n                        </NavItem>\n                    </Nav>\n                    <TabContent activeTab={this.state.activeTab}>\n                        <TabPane tabId=\"1\">\n                            <Row>\n                                <Col sm=\"12\">\n                                    <div className=\"bork-logo\">\n                                        <div className=\"UserAuth\">\n                                            <p className=\"error\" id=\"id_invalid_user\"></p>\n                                            <Form onSubmit={this.handleLoginSubmit} className=\"login\">\n                                                <FormGroup>\n                                                    <Label for=\"username\">Username</Label>\n                                                    <Input\n                                                        type=\"username\"\n                                                        name=\"username\"\n                                                        id=\"UserAuth-username\"\n                                                        placeholder=\"Enter username\"\n                                                        onChange={this.handleUsernameChange}\n                                                    />\n                                                </FormGroup>\n                                                <FormGroup>\n                                                    <Label for=\"examplePassword\">Password</Label>\n                                                    <Input\n                                                        type=\"password\"\n                                                        name=\"password\"\n                                                        id=\"UserAuth-password\"\n                                                        placeholder=\"Enter password\"\n                                                        onChange={this.handlePasswordChange}\n                                                    />\n                                                </FormGroup>\n                                                <Button id=\"id_login_button\">Login</Button>\n                                            </Form>\n                                        </div>\n                                    </div>\n                                </Col>\n                            </Row>\n                        </TabPane>\n                        <TabPane tabId=\"2\">\n                            <Row>\n                                <Col sm=\"12\">\n                                    <div className=\"bork-logo\">\n                                        <div className=\"UserAuth\">\n                                            <p className=\"error\" id=\"id_existing_user\"></p>\n                                            <Form onSubmit={this.handleSignUpSubmit} className=\"sign-up\">\n                                                <FormGroup>\n                                                    <Label for=\"username\">Username</Label>\n                                                    <Input\n                                                        type=\"username\"\n                                                        name=\"username\"\n                                                        id=\"UserAuth-username\"\n                                                        placeholder=\"Enter username\"\n                                                        onChange={this.handleUsernameChange}\n                                                    />\n                                                </FormGroup>\n                                                <FormGroup>\n                                                    <Label for=\"examplePassword\">Password</Label>\n                                                    <Input\n                                                        type=\"password\"\n                                                        name=\"password\"\n                                                        id=\"UserAuth-password\"\n                                                        placeholder=\"Enter password\"\n                                                        onChange={this.handlePasswordChange}\n                                                    />\n                                                </FormGroup>\n                                                <Button id='id_sign_up_button'>Sign-Up</Button>\n                                            </Form>\n                                        </div>\n                                    </div>\n                                </Col>\n                            </Row>\n                        </TabPane>\n                    </TabContent>\n                </div>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}